import {getClassAndStyleForFixed} from './useFixedColumns';
import {noop} from 'intact-shared';
import {Checkbox} from '../checkbox';
import {Radio} from '../radio';

const {columns, data, checkType, hasFixedLeft, checked, disabled} = this.get();
const classNameObj = {
    'k-disabled': disabled,
    'k-checked': checked,
};

const createCheckTypeVNode = (children) => {
    return <td
        {...getClassAndStyleForFixed({
            fixed: hasFixedLeft ? 'left' : false,
            offset: 0
        })}
    >{children}</td>
}
const checkTypeVNode = checkType === 'checkbox' ?
    createCheckTypeVNode(<Checkbox value={checked} disabled={disabled} />) :
    checkType === 'radio' ?
        createCheckTypeVNode(<Radio value={checked} disabled={disabled} />) :
        null;

<tr ev-click={this.onClick} class={classNameObj}>
    {checkTypeVNode}
    <td v-for={columns} v-for-value="column"
        {...getClassAndStyleForFixed(column.props)}
    >
        {(() => {
            const props = column.props;
            const blocks = props.$blocks; 
            if (blocks) {
                const template = blocks.template || blocks.default;
                if (template) {
                    return template(noop, data);
                }
            }
            return data[props.key];
        })()}
    </td>
</tr>

